<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ModbusRTUSlave: ModbusRTUSlave Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ModbusRTUSlave
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">ModbusRTUSlave is an Arduino library that allows an Arduino board to communication with Modbus RTU master devices.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_modbus_r_t_u_slave-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ModbusRTUSlave Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_modbus_r_t_u_slave_8h_source.html">ModbusRTUSlave.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ab11d7fdd94fd81eb26727b5fdcbec792"><td class="memItemLeft" align="right" valign="top">typedef int8_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_r_t_u_slave.html#ab11d7fdd94fd81eb26727b5fdcbec792">BoolRead</a>) (uint16_t)</td></tr>
<tr class="separator:ab11d7fdd94fd81eb26727b5fdcbec792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ffd7db554b9beeb2260568d3d9f946a"><td class="memItemLeft" align="right" valign="top">typedef bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_r_t_u_slave.html#a6ffd7db554b9beeb2260568d3d9f946a">BoolWrite</a>) (uint16_t, bool)</td></tr>
<tr class="separator:a6ffd7db554b9beeb2260568d3d9f946a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac81438239617831549cb795253de376b"><td class="memItemLeft" align="right" valign="top">typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_r_t_u_slave.html#ac81438239617831549cb795253de376b">WordRead</a>) (uint16_t)</td></tr>
<tr class="separator:ac81438239617831549cb795253de376b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a0a6e081b55511f7327e776784fa0d8"><td class="memItemLeft" align="right" valign="top">typedef bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_r_t_u_slave.html#a9a0a6e081b55511f7327e776784fa0d8">WordWrite</a>) (uint16_t, uint16_t)</td></tr>
<tr class="separator:a9a0a6e081b55511f7327e776784fa0d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab2b3eadeb85d9c5e09c132ee91423a5e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_r_t_u_slave.html#ab2b3eadeb85d9c5e09c132ee91423a5e">ModbusRTUSlave</a> (Stream &amp;serial, uint8_t *buf, uint16_t bufSize, uint8_t dePin=255)</td></tr>
<tr class="separator:ab2b3eadeb85d9c5e09c132ee91423a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db987f5c91e55373422b96f3f9dd88f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_r_t_u_slave.html#a0db987f5c91e55373422b96f3f9dd88f">configureCoils</a> (uint16_t numCoils, <a class="el" href="class_modbus_r_t_u_slave.html#ab11d7fdd94fd81eb26727b5fdcbec792">BoolRead</a> coilRead, <a class="el" href="class_modbus_r_t_u_slave.html#a6ffd7db554b9beeb2260568d3d9f946a">BoolWrite</a> coilWrite)</td></tr>
<tr class="separator:a0db987f5c91e55373422b96f3f9dd88f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a5507cb810ab3e1fe7c4c5ba037f4f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_r_t_u_slave.html#a1a5507cb810ab3e1fe7c4c5ba037f4f3">configureDiscreteInputs</a> (uint16_t numDiscreteInputs, <a class="el" href="class_modbus_r_t_u_slave.html#ab11d7fdd94fd81eb26727b5fdcbec792">BoolRead</a> discreteInputRead)</td></tr>
<tr class="separator:a1a5507cb810ab3e1fe7c4c5ba037f4f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a205c0042597ca8e2815a5d8b091e8537"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_r_t_u_slave.html#a205c0042597ca8e2815a5d8b091e8537">configureHoldingRegisters</a> (uint16_t numHoldingRegisters, <a class="el" href="class_modbus_r_t_u_slave.html#ac81438239617831549cb795253de376b">WordRead</a> holdingRegisterRead, <a class="el" href="class_modbus_r_t_u_slave.html#a9a0a6e081b55511f7327e776784fa0d8">WordWrite</a> holdingRegisterWrite)</td></tr>
<tr class="separator:a205c0042597ca8e2815a5d8b091e8537"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c948e25624df3b0d1bd71c6416015c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_r_t_u_slave.html#a7c948e25624df3b0d1bd71c6416015c2">configureInputRegisters</a> (uint16_t numInputRegisters, <a class="el" href="class_modbus_r_t_u_slave.html#ac81438239617831549cb795253de376b">WordRead</a> inputRegisterRead)</td></tr>
<tr class="separator:a7c948e25624df3b0d1bd71c6416015c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85bf1512b4978aa0df1b06b10c986a0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_r_t_u_slave.html#a85bf1512b4978aa0df1b06b10c986a0c">begin</a> (uint8_t id, uint32_t baud, uint8_t config=0x06)</td></tr>
<tr class="separator:a85bf1512b4978aa0df1b06b10c986a0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a7518e7c417244ee1ae85f7e94893ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_r_t_u_slave.html#a4a7518e7c417244ee1ae85f7e94893ba">poll</a> ()</td></tr>
<tr class="separator:a4a7518e7c417244ee1ae85f7e94893ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ab11d7fdd94fd81eb26727b5fdcbec792"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab11d7fdd94fd81eb26727b5fdcbec792">&#9670;&nbsp;</a></span>BoolRead</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int8_t(* ModbusRTUSlave::BoolRead) (uint16_t)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a definition for a function type. This type is used for reading coils and discrete inputs.</p>
<dl class="section return"><dt>Returns</dt><dd>This returns a signed 8-bit value. It is normally used as a boolean value, but a neagaive value is used to indicate an error.</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> coilRead(word address) {</div><div class="line"><span class="comment">// code for reading a coil</span></div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="a6ffd7db554b9beeb2260568d3d9f946a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ffd7db554b9beeb2260568d3d9f946a">&#9670;&nbsp;</a></span>BoolWrite</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef bool(* ModbusRTUSlave::BoolWrite) (uint16_t, bool)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac81438239617831549cb795253de376b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac81438239617831549cb795253de376b">&#9670;&nbsp;</a></span>WordRead</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t(* ModbusRTUSlave::WordRead) (uint16_t)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9a0a6e081b55511f7327e776784fa0d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a0a6e081b55511f7327e776784fa0d8">&#9670;&nbsp;</a></span>WordWrite</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef bool(* ModbusRTUSlave::WordWrite) (uint16_t, uint16_t)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab2b3eadeb85d9c5e09c132ee91423a5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2b3eadeb85d9c5e09c132ee91423a5e">&#9670;&nbsp;</a></span>ModbusRTUSlave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ModbusRTUSlave::ModbusRTUSlave </td>
          <td>(</td>
          <td class="paramtype">Stream &amp;&#160;</td>
          <td class="paramname"><em>serial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>bufSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dePin</em> = <code>255</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the constructor. It sets up the modbus interface.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>This specifies the Stream object to use. </td></tr>
    <tr><td class="paramname">buf</td><td>This is a user defined byte array that is used as a buffer. </td></tr>
    <tr><td class="paramname">bufSize</td><td>This is the size of the buffer array in bytes. </td></tr>
    <tr><td class="paramname">dePin</td><td>This is optional. This specifies what pin to use to enable the driver on a RS-485 transceiver. No pin is used if this paramter is not set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a85bf1512b4978aa0df1b06b10c986a0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85bf1512b4978aa0df1b06b10c986a0c">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ModbusRTUSlave::begin </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>baud</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>config</em> = <code>0x06</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This should be run in setup() before running <a class="el" href="class_modbus_r_t_u_slave.html#a4a7518e7c417244ee1ae85f7e94893ba">poll()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>This is the slave id/address. </td></tr>
    <tr><td class="paramname">baud</td><td>This is the baud rate used in the serial interface. </td></tr>
    <tr><td class="paramname">config</td><td>This is optional. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0db987f5c91e55373422b96f3f9dd88f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0db987f5c91e55373422b96f3f9dd88f">&#9670;&nbsp;</a></span>configureCoils()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ModbusRTUSlave::configureCoils </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>numCoils</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_modbus_r_t_u_slave.html#ab11d7fdd94fd81eb26727b5fdcbec792">BoolRead</a>&#160;</td>
          <td class="paramname"><em>coilRead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_modbus_r_t_u_slave.html#a6ffd7db554b9beeb2260568d3d9f946a">BoolWrite</a>&#160;</td>
          <td class="paramname"><em>coilWrite</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This configures the coils. If coils are used, this should be run in setup() before running <a class="el" href="class_modbus_r_t_u_slave.html#a4a7518e7c417244ee1ae85f7e94893ba">poll()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numCoils</td><td>This is the number of coils. </td></tr>
    <tr><td class="paramname">coilRead</td><td>This is a user defined function of type BoolRead for reading coils. </td></tr>
    <tr><td class="paramname">coilWrite</td><td>This is a user defined function of type BoolWrite for writing coils. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1a5507cb810ab3e1fe7c4c5ba037f4f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a5507cb810ab3e1fe7c4c5ba037f4f3">&#9670;&nbsp;</a></span>configureDiscreteInputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ModbusRTUSlave::configureDiscreteInputs </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>numDiscreteInputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_modbus_r_t_u_slave.html#ab11d7fdd94fd81eb26727b5fdcbec792">BoolRead</a>&#160;</td>
          <td class="paramname"><em>discreteInputRead</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This configures discrete inputs. If discrete inputs are used, this should be run in setup() before running <a class="el" href="class_modbus_r_t_u_slave.html#a4a7518e7c417244ee1ae85f7e94893ba">poll()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numDiscreteInputs</td><td>This is the number of discrete inputs. </td></tr>
    <tr><td class="paramname">discreteInputRead</td><td>This is a user defined function of type BoolRead for reading discrete inputs. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a205c0042597ca8e2815a5d8b091e8537"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a205c0042597ca8e2815a5d8b091e8537">&#9670;&nbsp;</a></span>configureHoldingRegisters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ModbusRTUSlave::configureHoldingRegisters </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>numHoldingRegisters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_modbus_r_t_u_slave.html#ac81438239617831549cb795253de376b">WordRead</a>&#160;</td>
          <td class="paramname"><em>holdingRegisterRead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_modbus_r_t_u_slave.html#a9a0a6e081b55511f7327e776784fa0d8">WordWrite</a>&#160;</td>
          <td class="paramname"><em>holdingRegisterWrite</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This configures holding registers. If holding registers are used, this should be run in setup() before running <a class="el" href="class_modbus_r_t_u_slave.html#a4a7518e7c417244ee1ae85f7e94893ba">poll()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numHoldingRegisters</td><td>This is the number of holding registers. </td></tr>
    <tr><td class="paramname">holdingRegisterRead</td><td>This is a user defined function of type WordRead for reading holding registers. </td></tr>
    <tr><td class="paramname">holdingRegisterWrite</td><td>This is a user defined function of type WordWrite for writing holding registers. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7c948e25624df3b0d1bd71c6416015c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c948e25624df3b0d1bd71c6416015c2">&#9670;&nbsp;</a></span>configureInputRegisters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ModbusRTUSlave::configureInputRegisters </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>numInputRegisters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_modbus_r_t_u_slave.html#ac81438239617831549cb795253de376b">WordRead</a>&#160;</td>
          <td class="paramname"><em>inputRegisterRead</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This configures input registers. If input registers are used, this should be run in setup() before running <a class="el" href="class_modbus_r_t_u_slave.html#a4a7518e7c417244ee1ae85f7e94893ba">poll()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numInputRegisters</td><td>This is the number of input registers. </td></tr>
    <tr><td class="paramname">inputRegisterRead</td><td>This is a user defined function of type WordRead for reading input registers. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4a7518e7c417244ee1ae85f7e94893ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a7518e7c417244ee1ae85f7e94893ba">&#9670;&nbsp;</a></span>poll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ModbusRTUSlave::poll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This should be run frequently in loop(). This processes requests. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/chris/Arduino/libraries/ModbusRTUSlave/src/<a class="el" href="_modbus_r_t_u_slave_8h_source.html">ModbusRTUSlave.h</a></li>
<li>/home/chris/Arduino/libraries/ModbusRTUSlave/src/<a class="el" href="_mobus_r_t_u_slave_8cpp.html">MobusRTUSlave.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
